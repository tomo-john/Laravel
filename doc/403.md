# 403エラー

- 403 = ログインはしているけど、権限がない

| 状態                 | エラー                     |
|----------------------|----------------------------|
| 未ログイン           | 302 => loginにリダイレクト |
| ログイン済・権限なし | 403 Forbidden              |

### 403が出る流れ

Controller => `$this->authorize()` => Policy => `false` => AuthorizationException => `403`

```php
<?php
public function update(User $user, Dog $dog)
{
    return $user->id === $dog->user_id;
}
```

ここで`false`を返した瞬間に403発生。

Controller:

```php
<?php
public function edit(Dog $dog)
{
    $this->authorize('update', $dog);
    return view('dogs.edit', compact('dog'));
}
```

## 403画面のカスタマイズ

Laravelのエラー画面の場所は`resouces/views/errors/`

=> 今回は`errors`ディレクトリを作成

デフォルト値: `vendor/laravel/framework/src/Illuminate/Foundation/Exceptions/views/403.blade.php`

=> しかし、`vendor`ディレクトリの中身を直接変更してはダメ(アップデートで消える)

`resources/views/errors/403.blade.php`を新規作成して中身を書く。

